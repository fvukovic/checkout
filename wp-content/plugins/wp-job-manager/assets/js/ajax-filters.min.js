jQuery(document).ready(function (w) { function y(e) { return window.sessionStorage && "function" == typeof window.sessionStorage.setItem && !w(document.body).hasClass("disable-job-manager-form-state-storage") && !e.data("disable-form-state-storage") } function k(e) { var t = w("div.job_listings").index(e), i = e.data("post_id"); return void 0 !== i && i || (i = window.location.href.replace(location.hash, "")), a + i + "_" + t } function x(e, t) { if (!y(e)) return !1; "object" != typeof t && (t = {}); k(e); return !1 } function C(e) { if (!y(e)) return !1; k(e); try { null } catch (e) { } return !1 } function n(e, t) { if (y(e) && e) { var i = C(e); return i && (i.persist_results = t, x(e, i)) } } function e(e) { if (y(e) && e) { var t = C(e); if (t) { var i = e.find(".job_filters"); return t.form = i.serialize(), x(e, t) } } } function S(e, t, i) { var a = e.find(".job_listings"), n = e.find(".showing_jobs"); if ("boolean" != typeof i && (i = !1), "string" == typeof t.showing && t.showing) { var o = jQuery("<span>").html(t.showing); n.show().html("").html(t.showing_links).prepend(o) } else n.hide(); return t.showing_all ? n.addClass("wp-job-manager-showing-all") : n.removeClass("wp-job-manager-showing-all"), t.html && (i ? a.append(t.html) : a.html(t.html)), !0 === e.data("show_pagination") ? (e.find(".job-manager-pagination").remove(), t.pagination && e.append(t.pagination)) : (!t.found_jobs || t.max_num_pages <= t.data.page ? w(".load_more_jobs:not(.load_previous)", e).hide() : w(".load_more_jobs", e).show(), w(".load_more_jobs", e).removeClass("loading").data("page", t.data.page), w("li.job_listing", a).css("visibility", "visible")), !0 } var a = "job_listing_"; w(document).on("click", "a", function () { w("div.job_listings").each(function () { e(w(this)) }) }), w(document).on("submit", "form", function () { w("div.job_listings").each(function () { e(w(this)) }) }); var H = []; if (w("div.job_listings").on("click", "li.job_listing a", function () { n(w(this).closest("div.job_listings"), !0) }).on("click", ".job-manager-pagination a", function () { var e = w(this).closest("div.job_listings"), t = w(this).data("page"); return e.triggerHandler("update_results", [t, !1]), w("body, html").animate({ scrollTop: e.offset().top }, 600), !1 }).on("update_results", function (e, t, i) { var a, n, o, s = "", r = w(this), l = r.find(".job_filters"), d = r.find(".job_listings"), c = r.data("per_page"), g = r.data("orderby"), u = r.data("order"), _ = r.data("featured"), f = r.data("filled"), h = r.data("job_types"), p = r.data("post_status"), m = w("div.job_listings").index(this); if (!(m < 0)) { if (function (e) { if (y(e)) { var t = k(e); try { window.sessionStorage.removeItem(t) } catch (e) { return } } }(r), H[m] && H[m].abort(), i && 1 !== t || (w("li.job_listing, li.no_job_listings_found", d).css("visibility", "hidden"), d.addClass("loading")), r.find(".load_more_jobs").data("page", t), !0 === r.data("show_filters")) { var b = []; w(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]', l).each(function () { b.push(w(this).val()) }), a = l.find(':input[name^="search_categories"]').map(function () { return w(this).val() }).get(), o = n = ""; var j = l.find(':input[name="search_keywords"]'), v = l.find(':input[name="search_location"]'); j.val() !== j.attr("placeholder") && (n = j.val()), v.val() !== v.attr("placeholder") && (o = v.val()), s = { lang: job_manager_ajax_filters.lang, search_keywords: n, search_location: o, search_categories: a, filter_job_type: b, filter_post_status: p, per_page: c, orderby: g, order: u, page: t, featured: _, filled: f, show_pagination: r.data("show_pagination"), form_data: l.serialize() } } else a = r.data("categories"), n = r.data("keywords"), o = r.data("location"), a && ("string" != typeof a && (a = String(a)), a = a.split(",")), s = { lang: job_manager_ajax_filters.lang, search_categories: a, search_keywords: n, search_location: o, filter_post_status: p, filter_job_type: h, per_page: c, orderby: g, order: u, page: t, featured: _, filled: f, show_pagination: r.data("show_pagination") }; H[m] = w.ajax({ type: "POST", url: job_manager_ajax_filters.ajax_url.toString().replace("%%endpoint%%", "get_listings"), data: s, success: function (e) { if (e) try { e.data = s, S(r, e, i), d.removeClass("loading"), r.triggerHandler("updated_results", e), function (e, t) { if (y(e)) { var i = C(e); i = i || { persist_results: !1 }; var a = e.find(".job_listings"); t.html = a.html(), i.results = t, x(e, i) } }(r, e) } catch (e) { window.console && window.console.log(e) } }, error: function (e, t, i) { window.console && "abort" !== t && window.console.log(t + ": " + i) }, statusCode: { 404: function () { window.console && window.console.log("Error 404: Ajax Endpoint cannot be reached. Go to Settings > Permalinks and save to resolve.") } } }) } }), w("#search_keywords, #search_location, .job_types :input, #search_categories, .job-manager-filter").change(function () { var e = w(this).closest("div.job_listings"); e.triggerHandler("update_results", [1, !1]), x(e) }).on("keyup", function (e) { 13 === e.which && w(this).trigger("change") }), w(".job_filters").on("click", ".reset", function () { var e = w(this).closest("div.job_listings"), t = w(this).closest("form"); return t.find(':input[name="search_keywords"], :input[name="search_location"], .job-manager-filter').not(':input[type="hidden"]').trigger("change.select2"), t.find(':input[name^="search_categories"]').not(':input[type="hidden"]').trigger("change.select2"), w(':input[name="filter_job_type[]"]', t).not(':input[type="hidden"]').attr("checked", "checked"), e.triggerHandler("reset"), e.triggerHandler("update_results", [1, !1]), x(e), !1 }).on("submit", function () { return !1 }), w(document.body).on("click", ".load_more_jobs", function () { var e = w(this).closest("div.job_listings"), t = parseInt(w(this).data("page") || 1, 10); return w(this).addClass("loading"), t += 1, w(this).data("page", t), e.triggerHandler("update_results", [t, !0]), !1 }), w.isFunction(w.fn.select2) && "undefined" != typeof job_manager_select2_args) { var t = job_manager_select2_args; t.allowClear = !0, t.minimumResultsForSearch = 10, w('select[name^="search_categories"]:visible').select2(t) } w(window).on("load", function () { w("div.job_listings").each(function () { var e = w(this), t = e.find(".job_filters"), i = !1, a = C(e); a && (a.results && (i = S(e, a.results), n(e, !1), function (e) { if (y(e)) { var t = C(e); (t = t || {}).form = null, x(e, t) } }(e)), "string" == typeof a.form && "" !== a.form && (t.find("input[type=checkbox]").prop("checked", !1), t.deserialize(a.form), t.find(':input[name^="search_categories"]').val(searchParams.get("search_category")).not(':input[type="hidden"]').trigger("change.select2"))), !i && 0 < t.length && e.triggerHandler("update_results", [1, !1]) }) }), w(window).on("unload", function () { return w("div.job_listings").each(function () { var e = C(w(this)); e && !e.persist_results && function (e) { if (y(e)) { var t = C(e); (t = t || {}).results = null, x(e, t) } }(w(this)) }), !0 }), $("#select2-search_categories-container").on("click", function () {alert(); $("#filip").val("") }) });